$(function(){loadData();});$(function(){	$('.form').on('submit',function(event){		event.preventDefault();		$form=$(this);		$btnLoading=$form.find('.loader');  		if(isValid($form)){			crudRequest($form,$btnLoading);		}		});});$(document).on('click','.delete_id', function(){	 var id = $(this).attr("data-id"); 	  console.log(id);     var delete_id = $(this).attr("id");       console.log(delete_id);     const swalWithBootstrapButtons = Swal.mixin({			  customClass: {			    confirmButton: 'btn btn-success',			    cancelButton: 'btn btn-danger'			  },			  buttonsStyling: false,			})     swalWithBootstrapButtons.fire({  title: 'Are you sure?',  text: "You won't be able to revert this!",  type: 'warning',  showCancelButton: true,  confirmButtonText: 'Yes, delete it!',  cancelButtonText: 'No, cancel!',  reverseButtons: true}).then((result) => {  if (result.value) {     $.ajax({     	url:"delete_record.php",     	method:"POST",     	data:{id:id},     	dataType:"json",         success:function(result){           swalWithBootstrapButtons.fire(      'Deleted!',      'Your file has been deleted.',      'success'    )        },error:function(){       	Swal.fire({					   type: 'error',					  title: 'Oops...',					  text: 'Something went wrong!',					 					})       }   }) }     else if (    // Read more about handling dismissals    result.dismiss === Swal.DismissReason.cancel  ) {    swalWithBootstrapButtons.fire(      'Cancelled',      'Your imaginary file is safe :)',      'error'    )  }             loadData();          	        	})}) $(document).on('click', '.edit-delete_id', function(){  	var $form='';	var $modal='';           var id = $(this).attr("data-id");            console.log(id);           var update_id = $(this).attr("id");             console.log(update_id);              $.ajax({                  url:"fetch-data.php",                  method:"POST",                  data:{id:id},                  dataType:"json",                beforeSend:function(){                },                                             success:function(data){                 	                	if (data.status=='success') {                		                		if (update_id=='update') {                           $modal=$('#update-modal');                                                   }                // 		else if(update_id=='delete'){                // 			 $modal=$('#delete-modal');    	 		          // }	 			             $form=$modal.find('.form');                	 $form.find('.id').val(data.id);                       $form.find('.fname').val(data.fname);                      $form.find('.lname').val(data.lname);                      $form.find('.email').val(data.email);                                      $modal.modal('show');                  }                },complete:function(){               	$('.update_loader').html('Update.');                 }      })                });function crudRequest($form,$btnLoading){          		$.ajax({		url:$form.attr('action'),		method:$form.attr('method'),		data:$form.serialize(),		 beforeSend: function() {        // setting a timeout        // $(".submit").addClass('spinner-border spinner-border-sm');          // $('#updatebtn').val("Inserting");         // var $spiner= $btnLoading.addClass('spinner-border text-info');\       $btnLoading.html("<span class='spinner-border spinner-border-sm'></span>Loading..");       },		success:function(response){						 var response=$.parseJSON(response);			 if (response.status=='success') {	 	 				 showSuccessMessage($form,response.message);					    $('#submit_add')[0].reset();                       $('#add').modal('hide'); 				   $('.toast').toast('show');				   $btnLoading.html('Add');				   Swal.fire({						 						  type: 'success',						  title: 'Your work has been saved',						 						  timer: 1500						})			// $spiner.removeClass('spinner-border text-info');				     //  resetMessage();						}else if(response.status=='error'){				Swal.fire({					   type: 'error',					  title: 'Oops...',					  text: 'Something went wrong!',					 					})				// showErrorMessage($form,response.message);			}			loadData();			},error:function(){					},		complete:function(){			// resetMessage();		}	});}function isValid($form){	var inputField=$form.find('input');	for (var i = 0; i <inputField.length; i++) {		if(inputField[i].value=='' || inputField[i].value==null){			var $m =$form.find('.status') ;			$m.html('<div class="alert alert-danger" role="alert">Field is empty!</div>');						return false;					}else{						return true;		}			}			}function loadData(){	$.ajax({		url:'read.php',		method:'get',		 beforeSend: function() {		 	$('.table').html('<tr  style="text-align:center;"><td><img src="public/progress.gif"></td></tr>');		 },		success:function(response){			var response=$.parseJSON(response);						 if (response.status=='success') {				$('.table').html(response.data);			}					}	});}function showErrorMessage($form,message){	var $alert=$form.find('.status');	$alert.addClass('alert');	$alert.addClass('alert-danger');	$alert.html(message);}	function showSuccessMessage($form,message){	var $alert=$form.find('.status');	$alert.addClass('alert');	$alert.addClass('alert-success');	$alert.html(message);	$alert.fadeOut(1000);	}function resetMessage(){    $('.status').removeClass('alert');    $('.status').removeClass('alert-danger');	$('.status').removeClass('alert-success');	$('.status').html('');}// function spiner($form){// var $spiner=$form.find('.addbtn');// $spiner.addClass('spinner-border spinner-border-sm');// }//  function update_loading($form,$btnLoading){// // $btnLoading.html("<span class='spinner-border spinner-border-sm'></span>Loading..");// console.log($form) //}// $(function(){// 	$('.table').on('click',function(event){// 		event.preventDefault();     // 	var	$anchor=$(event.target).parent('.icon');// 	var id=$anchor.attr('data-id');// 	if ($anchor.hasClass('icon')) {				// 			 get_record($anchor.attr('id'),id);// 			// console.log($anchor.attr('id'));// 	}// 	});// });// function get_record(actionName,id){// 	var $modal='';// 	var $form='';// 	$.ajax({// 		url:'fetch-data.php',// 		method:'post',// 		data:{id:id},// 		 beforeSend: function() {		 	//         },// 		success:function(response){// 			 // console.log(response)// 		 var response=$.parseJSON(response);		// 			 if (response.status=='success') {// 			 	if (actionName=='update') {// 			 		$modal=$('#update-modal');  // 			 		  resetMessage();// 			 	}else if(actionName=='delete'){// 			 		 $modal=$('#delete-modal');// 			 	}	// 			     $form=$modal.find('.form');//                  $form.find('.id').val(response.id);//                  $form.find('.fname').val(response.fname);//                  $form.find('.lname').val(response.lname);//                  $form.find('.email').val(response.email);// 			     $modal.modal("show");// 			 }// 			}       //       })//     }